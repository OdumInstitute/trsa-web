<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      >

    <body>

        <ui:composition template="/template/layout.xhtml">

            <ui:define name="content">
                <h:form>

                    <p:messages id="messages" showDetail="true" closable="true">
                        <p:autoUpdate />
                    </p:messages>

                    <h3 style="margin:5px 5px 30px 5px">Publish Dataset</h3>
                    <p:panelGrid columns="3"  class="ui-panelgrid-blank">            
                        <f:facet name="header">
                            Publish parameters
                        </f:facet>

                        <h:outputLabel for="dataverseServer"  value="Target Dataverse server:" /> 
                        <h:outputText id="dataverseServer" value="#{ingestPageView.dataverseServer}" />
                        <h:outputText value="note: demo site" /> 

                        <h:outputLabel for="apiKey" value="api key:" /> 
                        <h:outputText id="apiKey" value="#{ingestPageView.apiKey}" /> 
                        <h:outputText value="note: " /> 


                        <h:outputLabel for="dataverseId" value="target Dataverse Id:" /> 
                        <h:outputText id="dataverseId" value="#{ingestPageView.targetDataverseId}" /> 
                        <h:outputText value="note: integer" /> 


                        <h:outputLabel for="zipfileName" value="Ingested file:" /> 
                        <h:outputText id="zipfileName" value="#{ingestPageView.ingestedFile}" /> 
                        <h:outputText value="note: zip file" /> 



                        <h:outputLabel for="datasetId" value="Payload Dataset Id" />
                        <h:outputText id="datasetId" value="#{ingestPageView.datasetIdentifier}" /> 
                        <h:outputText value="note: locally generated" /> 


                        <h:outputLabel for="status"  value="Status:" /> 
                        <h:outputText id="status" value="#{ingestPageView.progressTest}"  />
                        <h:outputText value="note: status indicator" /> 

                        <f:facet name="footer">


                            <p:commandButton id="publishButton" 
                                             ajax="true" 
                                             update="messages status dataverseButton publishButton" 
                                             value="publish this dataset" 
                                             disabled="#{!ingestPageView.publishButtonEnabled}"
                                             actionListener="#{ingestPageView.publish}" />

                            <p:commandButton id="dataverseButton"
                                             ajax="true" update="messages status" 
                                             value="Go to Dataverse site" 
                                             disabled="#{!ingestPageView.gotoDataverseButtonEnabled}"
                                             actionListener="#{ingestPageView.goToDataverseSite}" />


                            <p:commandButton value="Demo Home"  action="/index.xhtml?face-redirect=true;" />
                        </f:facet>
                    </p:panelGrid>


                </h:form>

            </ui:define>

        </ui:composition>

    </body>
</html>
